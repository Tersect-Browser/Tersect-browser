<div class="v-stretch-box">
    <div class="tb-top-bar">
        <button pButton class="tb-setting-button" icon="fa fa-database"
        (click)="display_sidebar = true" ></button>
        <img class="tb-logo" src="assets/logo.png" />
        <a href="https://www.cranfield.ac.uk/" target="_blank">
            <img class="cranfield-logo" src="assets/cranfield_logo.png" />
        </a>
    </div>

    <div class="p-grid p-justify-between tb-toolbar">
        <div class="p-col-2 accession-selector">
            <div class="label">Reference</div>
            <div class="dropdown">
                <p-dropdown [options]="accessions"
                            [filter]="true"
                            [autoWidth]="false"
                            [style]="{'width':'100%'}"
                            [(ngModel)]="selected_reference"></p-dropdown>
            </div>
        </div>
        <div class="p-col-2">
            <p-dropdown [options]="chromosomes"
                        [style]="{'width':'100%'}"
                        [(ngModel)]="selected_chromosome"></p-dropdown>
        </div>
        <div class="p-col-1 binsize-selector">
            Bin size: {{ widget_binsize }}
            <p-slider [(ngModel)]="widget_binsize"
                      [style]="{'width':'100%'}"
                      [min]="binsize_min" [max]="binsize_max"
                      [step]="binsize_step"
                      (onSlideEnd)="updateBinsize()"></p-slider>
        </div>
        <div class="p-col-3 interval-selector">
            Interval:
            <input type="text" pKeyFilter="pint"
                   [(ngModel)]="selected_interval[0]"
                   (input)="typeInterval($event)" pInputText>
            -
            <input type="text" pKeyFilter="pint"
                   [(ngModel)]="selected_interval[1]"
                   (input)="typeInterval($event)" pInputText>
            <p-slider [(ngModel)]="selected_interval" [range]="true"
                      [style]="{'width':'100%'}"
                      (onSlideEnd)="updateInterval()"
                      [min]="interval_min" [max]="interval_max"></p-slider>
        </div>
        <div class="p-col zoom-selector">
            <button pButton icon="fa fa-search-minus"
                    [disabled]="zoom_level <= MIN_ZOOM_LEVEL"
                    (click)="zoomOut()"></button>
            <button pButton icon="fa fa-search-plus"
                    [disabled]="zoom_level >= MAX_ZOOM_LEVEL"
                    (click)="zoomIn()"></button>
        </div>
        <div class="p-col-2 toolbar-buttons">
            <button pButton label="Download" icon="fa fa-download"
                disabled="true">
            </button>
            <button pButton label="Share" icon="fa fa-external-link"
                disabled="true">
            </button>
        </div>
    </div>

    <div class="v-stretch plot-container hbox">
        <app-introgression-plot [chromosome]="selected_chromosome"
            [accessions]="selected_accessions"
            [interval]="selected_interval"
            [reference]="selected_reference"
            [binsize]="selected_binsize"
            [zoom_level]="zoom_level"
            (wheel)="scrollWheel($event)">
        </app-introgression-plot>
    </div>
</div>

<p-sidebar [(visible)]="display_sidebar" position="left"
           (onHide)="updateAccessions()">
    <b>Displayed accessions</b>
    <p-listbox [options]="accessions" [(ngModel)]="widget_accessions"
               filter="true" multiple="true" checkbox="true"
               [style]="{'width': '100%', 'height': '95%'}"
               [listStyle]="{'max-height':'100%'}">
    </p-listbox>
</p-sidebar>
